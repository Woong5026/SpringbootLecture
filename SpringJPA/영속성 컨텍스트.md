db를 어떻게 설계하고 객체를 어떻게 설계해서 JPA로 묶을건지? 

실제 JPA가 어떻게 동작하는지 > 영속성 컨텍스트와 관련

## 영속성 컨텍스트

EntityManager.persist(entity) > 이는 사실 db에 저장하는게 아닌 영속성 컨텍스트에 저장한다는 뜻

EntityManager를 만들면 PersistenceContext(영속성 컨텍스트)가 자동으로 생성


### 영속성 생명주기
  +비영속
  영속성 컨텍스트와 전혀 관계가 없는 새로운 상태 
  
  ```java
  //객체를 생성한 상태(비영속) 
  Member member = new Member(); 
  member.setId("member1"); 
  member.setUsername("회원1");
  ```

  + 영속 (managed)
  영속성 컨텍스트에 관리되는 상태 = EntityManager.persist(entity)
  
  ```java
  //객체를 생성한 상태(비영속) 
  Member member = new Member(); 
  member.setId("member1"); 
  member.setUsername(“회원1”);
  
  EntityManager em = emf.createEntityManager();
  em.getTransaction().begin();
  //객체를 저장한 상태(영속)
  em.persist(member);
  ```
  
  멤버 객체 생성 후 엔티티 매니저를 얻어온 후 persist에 넣으면 member가 영속컨텍스트에 들어가며 영속상태가 된다
  
  영속이 된다하더라도 바로 db에 데이터가 날라가는 것이 아님
  
  
  + 준영속 (detached)
  영속성 컨텍스트에 저장되었다가 분리된 상태 (아무 관계가 아니게 되는것)

  
  + 삭제 (removed)
  삭제된 상태, 실제 삭제를 요청하는 단계
