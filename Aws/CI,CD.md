


### CI

CI는 지속적 통합(Continuous Integration)으로,

모든 개발이 끝난 이후에 코드 품질을 관리하는 고전적 방식의 단점을 해소하기위해 나타난 개념이다.

말그대로 개발을 하면서 ‘코드에대한 통합’을 ‘지속적’으로 진행함으로써 품질을 유지하자는 것이다.

ex)
10명의 개발자가 참여하는 프로젝트가 있다고 가정해보자.

git에 기본 틀이 잡혀있는 코드가 올라와있고, 각 개발자가 자신의 로컬환경에 clone 받아서 작업을 시작한다.

그런데 개발이 끝날때까지 모든 개발자가 한 번도 중앙저장소에 코드를 올리지 않았고,

개발이 끝난 이후에 10명의 개발자의 코드를 한 번에 통합해야하는 상황이라면?


git에 코드만 올려놓으면 **알아서 테스트와 빌드를 수행**하고, 그 결과를 잘 정리해 개발자에게 자동으로 알려주는 프로그램

>> 쉽게 말하면, 매일 퇴근하기 전에 git에 코드를 올리고 문제가 없는지 테스트하라는 것이다

ex)

1. 모든 개발자는 퇴근하기 전에 자신의 코드를 중앙 코드와 통합한다.

2. 다음날 출근시 메일로 발송된 결과 리포트를 확인하고 버그가 있으면 수정한다.

테스트나 빌드등 복잡한 절차가 모두 생략되고, 그냥 퇴근전에 코드를 git에 올리고 가면 되는 것

### CD

CD란 지속적 배포(Continuous Deploy 또는 Delivery)로써, 소프트웨어가 항상 신뢰 가능한 수준에서 배포될 수 있도록 지속적으로 관리하자는 개념

배포 이전에 테스트와 빌드는 필수적이기 때문에, 사실상 CD가 되려면 항상 CI가 선행되어야 한다고 봐도 무방

즉, CI 프로세스를 통해 개발중에 지속적으로 빌드와 테스트를 진행하고, **이를 통과한 코드에 대하여 테스트서버와 운영서버에 곧바로 그 내용을 배포해 반영**하는 것


**사실상, CI = 빌드 및 테스트 자동화, CD = 배포 자동화라고 기억해도 무방**

CircleCI, Travis, Jenkins 와 같이, CI/CD 자동화를 조금이나마 쉽게 구현할 수 있도록 도와주는 괜찮은 솔루션들이 이미 몇 가지 있다

![image](https://user-images.githubusercontent.com/78454649/141933199-4f163d17-8cc6-4ee3-84c7-9b541d88ce54.png)


### CI를 적용할 때의 흐름

1. 개발자는 자신이 개발한 소프트웨어의 소스코드를 공통된 버전 관리시스템(github 등)에 저장합니다.

2. 소스코드상에 변동이 생기면 버전 관리 시스템에서는 CI 툴 (Jenkins)로 소스코드 변경을 알립니다.

3. CI툴에서는 변경된 소스코드를 대상으로 Build, Test, Merge를 진행합니다. 이 과정들이 완료되면 슬랙, 카카오톡, 메일 등을 통해 통합 결과를 알립니다. 

### CI 툴

Jenkins를 가장 많이 사용하는 것 같습니다. CI와 CD를 모두 구현할 수 있으며 사용할 수 있는 여러 플러그인들이 있어서 CI/CD를 구현하는 것을 편리하게 할 수 있습니다. 

단지 CI 전용 서버를 따로 구축해야 한다는 부담은 있습니다.

최근에 나온 Github Action에서는 따로 CI서버를 구축할 필요 없이 CI를 구현하게 해주고 있습니다. 아래 내용과 같은 파일을 만드는 것으로 CI 전략을 설정할 수 있습니다.


### Example

![image](https://user-images.githubusercontent.com/78454649/141933813-d2c5f6d6-2fe7-4971-8bc3-8bb83c74543f.png)

1. Github에 소스코드를 푸시하면 Github에서는 Jenkins로 Web Hook을 날립니다.

2. Jenkins에서 빌드-테스트를 진행하고 검증된 소스코드로 도커 이미지를 만듭니다.

3. Jenkins 내부에 설정된 스크립트로 만들어진 도커 이미지를 Docker hub로 푸시합니다.

4. Jenkins에서 프로덕션 서버로 스크립트 실행 명령을 날립니다. 해당 스크립트를 받은 운영서버는 Docker hub에서 이미지를 다운로드한 후 애플리케이션을 배포합니다.

