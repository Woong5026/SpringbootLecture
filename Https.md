### http란?

HTTP는 웹 환경에서 브라우저와 웹서버가 통신하는 방법을 말합니다. 보다 정확한 표현으로는 프로토콜(Protocol) 또는 규격, 규약

HTTP의 동작을 간략하게 살펴보자면 크롬이나, 익스플로러 등의 브라우저의 주소창에 특정 웹사이트(웹서버)의 주소를 입력하고 엔터를 치면 웹서버로 요청을 보내게 되고 웹서버는 요청에 대한 페이지를 브라우저에게 응답

이때 요청하고 응답하는 내용은 HTTP 메시지 라고 하는 편지(또는 쪽지)같은 형태로 주고 받게 된다

HTTP는 웹을 지탱하는 심플한 기술이지만 **치명적인 단점**이 있습니다. 브라우저와 웹서버가 통신함에 있어서 주고 받는 데이터가 암호화 되지 않고 생 날것 그대로 전송 되어진다는 점


### Https 란?

먼저 HTTPS는 HTTP over Secure Socket Layer 의 약자로 즉 SSL(Secure Socket Layer)을 이용한 HTTP 통신 방식을 의미

ex) 만약 네이버에서 로그인시 http 방식으로 로그인을 했을 때 아이디와 패스워드가 그대로 노출되어 서버로 전달되기 때문에 중간에서 누군가 이를 본다면 타인에게 노출될 우려

이때 https 는 타인이 봐도 알아볼 수 없게 암호화하여 서버에 전달하는 역할

또한 접속한 사이트가 믿을만한 곳인지 알려준다

### 대칭키

서버에서 메시지를 보낼 때 중간에서 타인이 이를 가로채도 알아볼 수 없도록 하려면 메세지 내용을 암호화 하는 과정이 필요 (메세지는 서버만 읽을 수 있도록 해야함)

이 과정에서 쓰여왔던 것이 대칭키 암호화된 메세지를 암호화하고 복호화 하는 같은 방식을 공유하는 것

![image](https://user-images.githubusercontent.com/78454649/143188903-a5722189-85d8-4b44-b406-2701330f5374.png)

이러한 방식을 사용한다면 표만 노출되지 않는다면 중간에서 메세지를 가로채여도 큰 무리가 없다

![image](https://user-images.githubusercontent.com/78454649/143189163-7cf09f4c-a027-496c-a9ae-fd41a5568ff8.png)

 4 * 3 = 12 라는 키가 있다면 "안녕하세요" 라는 문자열을 키와함께 알고리즘에 넣고 돌리면 알수없는 암호문이 만들어진다
 
 반대로 복호화하는 과정에서도 12 / 3 = 4 라는 값을 알고 싶다면 암호화된 "awngbeiwage"라는 값에 알고리즘을 넣으면 "안녕하세요" 가 보이게 하는 것이 복호화

그렇다면 애초에 이 키를 양쪽이 어떻게 공유할까? 어쨌든 키를 공유하려면 한번은 서버에서 서버로 키를 보내야 할텐데.. 이때 누가 가로챈다면?

### 비대칭키 (공개키)

앞서 말한 방식을 해결하기 위한 것이 비대칭키

만약 A키와 B키가 있다라고 가정하면 비대칭키에서는 A키로 암호화를 한다면 B키로만 복호화 할 수 있다(하나의 키로 암호,복호화 하는 대칭키와 다른개념)

Ex) 네이버 서버는 두 키들 중 하나만 비밀로 보관(개인키)고 다른 하나는 대중들에게 대중댈에게 공개(공개키)

이러면 사용자는 공개키로 비밀번호를 암호화해서 네이버에 보낸다 / 누가 가로챈다면? B키가 있어야지만 복호화를 할 수 있으니 이를 볼 수 있는 것은 네이버뿐

공개된 A키 안에 네이버의 공개키가 맞다는 내용이 들어가 있으므로 사이트가 믿을만 한 것인지도 확인이 가능

### https가 실제로 구현되는 과정

네이버가 보낸 공개키가 공인된 키인지 확인해야 하는데 이를 인증 시켜주는 인증기관은 CA(Certificate Authority)라고 하는데, 인증기관은 암호화시 사용되는 키를 담은 인증서를 발급하고 관리

- 브라우저에서 네이버에 접속할때 거치는 과정

클라이언트(서버, 브라우저)는 네이버(서버)를 아직 신뢰하지 못함 > 이때 일종의 탐색과정을 거치는 데 이것이 악수(handShake)라고 한다

클라이언트는 어떤 랜덤 데이터를 생성해서 네이버(서버)에 보낸다 > 네이버는 이에대한 답변으로 서버측에서 생성한 무작위 데이터, 해당서버의 인증서를 보내준다 > 악수가 생성

> 클라이언트는 네이버로부터 받은 인증서가 진짜인지 내장된 CA들의 정보를 통해 확인하게 된다(비대칭 시스템을 사용해서) > 인증서를 받은 키는 해당 CA의 **개인키**로 암호화가 되어있다

> 이게 진짜라면 CA에 저장되어 있는 **공개키**로 복호화를 할 수 있다 > 성공적으로 복호화(클라이언트 쪽)의 인증서에는 네이버의 공개키가 포함되어 있다

> 그럼 이제 서로 데이터를 주고 받아야 하는데 이때 비대칭이 아니라 대칭과 비대칭이 혼합되서 사용됨 WHy? 비대칭은 대칭보다 컴퓨터에 큰 부담을 주게 된다(다량의 데이터라면 더욱더)

> 이제 서버와 클라이언트는 대칭키를 사용하여 정보를 주고 받는다 , 그렇다면 중간에서 탈취될 위협은? 대칭키를 공유할때 비대칭키를 사용한다

> 악수 할때 생성된 두 무작위 데이터가 있다면 클라이언트는 이 둘을 혼합해서 하나의 임시키를 생성 , 이 임시키는 서버의 공개키로 암호화가 되어 네이버(서버)로 보내진 다음 

양쪽의 일련의 과정을 거쳐 동일한 대칭키가 만들어진다. 이후 서로 같은 대칭키를 가지고 있으니 3자가 알아볼 걱정은 끝! 설명도 끝!







